const apiKey = "YOUR_API_KEY";
const basemapEnum = "e16f851bdec647edba0498e186a5329c";

const map = L.map("map", {
  minZoom: 2,
}).setView([37.8316, -77.6569], 8);

L.esri.Vector.vectorBasemapLayer(basemapEnum, {
  apiKey: apiKey,
}).addTo(map);

const hikerIcon = L.icon({
  iconUrl:
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANEAAADyCAMAAADk3NBFAAAAwFBMVEUAf/8AAAAAQID////ExMRmZmZPT09WVlbLy8vIyMhAQECTk5M4ODhISEgAgf9dXV2qqqqAgIAAhP+3t7cAPXpra2twcHDq6upjY2OYmJgAbNkAT54AYcNZWVkAVasAYMGlpaUfHx8ARowREREYGBgASpQvLy8AePAAceMAaNAnJycAc+cAW7cAU6cAevUANGgAEyfY2Njk5OSGhoYAIUIAJEgADBgALFgAGTIAKVIAMGEACRIAFi0ADhwAIkUAOXHWBM1NAAAJjElEQVR4nO3daXOiMACAYUpVPOOFiuBRb1Fkt9r7/P//apMAAgok2lqSbN9Pzo7j8DQ0HMWNdJ1YJ39TalVGV5PJZF4ul4uwCiwHU5R+v1qtalo222q12qg6aocqoboH3fjV3Jp+GVyhUMjjbt22uA5daJOleM1tV5tf8dW8GS/KtNPeuvPKR4u29WnaW3Zu9ShRvp/2Zn0h7Vi05dkTJaqnvUnnZRgz4x29OBTd8ja5eYEGaDyhF9WwqBb57slorrQjarWyWrXaV5RcDh6i4JEKHrDKc9Rq38hvGmiC+k6RJElRom7EW0et+v5w+I3Bgyw65uIDMT4k7+qBwj83v6ymVfu5qHk4WhQFWuXg51y21klltXLU4EaKmkdvK1brjLXLlsObWFmVwqK+L9oeenLdC+xtX0wLj0+9nC/Hiw5muVGxn2MsBZ4x+83ntUo+SXSwzzG3v6E9zgfNd7lMJV8Mi+5CovCsMC2xV1fZ7z5KoV/IFSqFKJHiijLhX7cMg2X3v99NLaMQRcUQqH3h+fqc9gNUamWqZFEnBOqmvYNF5M1x5XZGoxEFz37mmSZz1bw5Qcu04kUfAdHu6nuCJ2tTeAYHz+fgyZ1zW8K9K6EofXRLglRgNwucJ+S8H3apXqAUVb5JdOGmq8mqGi+6Ry9cUarbeWJa7MyARTks6iR+BGNN2hSi21Q38dRiRc/ohSPyjq8P7w8Pr7C0tpUuGlHJfa/eOA6gJJSNWzitcUucHsg8quc3hFm4AWoDM3Az1NhJxqm4T6c/bk8UogoWeTcbTWfTowMXL+LnGW5GLdJoROnXGCeLHn2RwpUodvYOiMp8iMCMQlTEopEYope9aH+AFU+kiyLaCicqCCL6g16UkajJi8igFd0IJ+oKJyrxJcrGiT7RizkS1YUTacKJKryINskidS+aiyRaIdFUONHVryilwCBZJPMqir2nikUjKOoIJ/L/pLwURHQrigjfWJlCUZ4bkfV/ijqSfwkrhGgCRRlBRM5Fu5iiplCiKyi64UY0pBT5D9CsuRBV40SGJyoJJ6pzI+pRitrCiVrCiTRRRBtPVOVGZFKKFOFEOVFEA0/kP7i1EERUFE5U5kakU4rmwolWnIn6RNFINFFnIpzoSmCR/Sv62X5Fv6KfjySyhBVtf0WpRSsKfMVA4kKkkER5oUVsRysq8CNa0oky/Igox4gjEdUYbaWmMKLhsYjtqe5XJJCoxovIlqhEt7+i9FqQRD1XdMOLyF6sTxY10t7oxOy1aCJJ/29FXV5EgCQyBRXlf0XpBfSFaCLzPxUVpBI3Irq9riDthBHp3ImWVKKM5D8w+Mq4aC2g6JVK1OZGtBBNBC+Q6EQtfkQ2jagpZbkRSYQxWroi/6HOB9ZF9gOVqM+NaEEpUngRgbX9nihauyL/MdV3xkW6I8qRRBVuRKYkmqhHKSpyI7IIooUrKnMk+ksl8h+8/cu4aEMlqnEkMoBoohlBZPMmksaCiYAtiyZay403KpH/SP4b26KlCgQT6SSRhF/d8CMyVfCUJJKORU9siyxVEkw0EE5kiCaSxrSiES8iVbXvRBIB+wzRHdOipXAik1LU5UZkqepCLJFBLZpyIhrLYong1ZGsrk8VfbAsWquiiUwoWn6cKLpnWWQJJzKgSL8XSCShdUIoRRMeRGChQpF5quiZYZGJRc8CiSzRRA205I7aE0hkq9SiEhcioGPR8PFE0SO7oqFwIgOLLILolR+R7azERSXa8SACS9URvSSLHhzRFQciC4tkkuj9UPTCqqjhLgA3EEWET+rQXueIKsmiOg8ik07k/FGTC9FGNJHkraO4oRP5s/cfNkXOKRAW4fWAKs040RsvooErkh1RMVnU5kDkgYiiJz5E+51Olg060ZR10eB80SeTIkmWaUV3jmjEtiiw09GJWsyLjMAY4XW1yiTRimkRsNUTRVnWRcMTRPi2uBYQqQyKvDMg3IwgundEc5ZFwXlBEFFgXvBE82RRlWlRaF6AIjVZ9OyIyiyLBqeL+iyLDobIE9USRUrgexMycyIrLBoTRI+si4AUBtGJciyLhociZw1BkqjCrEiS5dNEL4yLjoaITlQJiMZMiQ4nOnpRjlXRIFakcSlCDwIdifD6dKNYkXPzK/B9WLZExpmiIqMi909GZ4n6bIrGxyCi6NMR+d+UH7Pz/9cdz9xYhNenm94kisqSv0TVjBlR1LRAFjVYFs2+IsqyJwK9SJArmsSKVEfUYk4EFpEeKDIoRHMWRbOvifz/i8ZgQxQ9z50gqjMmCt/QOke0Y0sUccrti5z16ZJFq8D/9saESIr7JaIXdZkSNY6vIQKiAX8i72GML4hGTIkSZgUakcycKOZ07lTRDTMisE707EXdRNGUHRGwCSBaUY0REbDHyfscbyJgR19BBJvRiCaBtQzSFMHzbSJInln8iOCkQAbRijIMiCLv/BxncCMiHFhPFeXTFoG4i/DD1EiRc4bQQI0dXNoiIG3oQLK6CYvylcK8u3Luco/H8A0fjug2XRFYEw9D+zbDgChT9q++QwVWr9ukIEo+2T5o4IkK/dpoGu1JWQSkpMuho73O8kS1OA0W+atA/rQIgCX9HhcQ7WKHB3vTEwH7lAFCouEwiYIbla7TEgFg0pwmhETmgahYb95uO53rcOmIAFiQT0yPRb0AZ9I9pKQpAralngySVd0fo1EzmpOKCABpeOoO54iW+zHqxnqgyF+B/UdEANi9M8YHi9auqBWzv3mi+Q+KoMc6a3ywyO4RBwiL9g8GDS4tggegwZnjg3NXONqSRLmfEcFfn97sKx553HDXbCKJ+j8gghzd+BIHZtCKshcWAdCw9cHZvz37VItWtLugCMDBWfTg6HzZI8ufS0Apal5GBJBmbW7GX+aoMvwIdWwBWlH+e0UAJ0kL05rJJ2tUZ/Pd0L+MZ7ONZeoL+Jnemk0k0fU3iMA+yV7rpgVH5vMTb5NKF3pEBm67YWw2A8uyhj1TX64XC1sCDSf02Q1akXd1azViA/E5JHuxhpKhNdhsDLxZKAttnNMQ14PtX8BMJ103dTNcz3urFWxMKfLuNDyOg6Pv9wn7A3uBPcKeYff39x8fd6gn2Nvb299977CHh9fX16sLRRZdV8ifwlIFsqhJ/hSWohija/KnMNQkGeSI6uTPYaYi4XDkiK5L7vd8J6gpbDQarVBzWBlWhFVgOZii9PvValXTstlWq9VG1XE7VAnWPexmX82r6ZdxKhQKedSt1xbX6TTL82bHi+C5vv4HvrtncugtnNMAAAAASUVORK5CYII=",
  iconSize: [26, 32],
});

var trailheads = L.esri
  .featureLayer({
    url:
      "https://services7.arcgis.com/D3ldBDYkJEQ9Y4At/arcgis/rest/services/virginia_book_publishers_dataset/FeatureServer/0",
    pointToLayer: (geojson, latlng) => {
      return L.marker(latlng, {
        icon: hikerIcon,
      });
    },
  })
  .addTo(map);

trailheads.bindPopup(function(layer) {
  return L.Util.template(
    "<b>{Name}</b><br>{Address}</br>{Phone}<br/>",
    layer.feature.properties
  );
});
